// src/app/features/wishlist/wishlist-page/wishlist-page.component.scss
@use "sass:color"; // Für color.adjust, falls nötig

// --- Lokale Variablen (ähnlich wie Cart Page, ggf. anpassen) ---
$page-max-width: 1200px;
$spacing-xs: 4px;
$spacing-small: 8px;
$spacing-medium: 16px;
$spacing-large: 24px;
$spacing-xl: 32px;
$breakpoint-large: 1024px;
$breakpoint-medium: 768px;
$breakpoint-small: 576px;

// --- Farben ---
// Sass-Variablen für Sass-Funktionen
$primary-color-sass: #A1B48A; // <-- HINZUGEFÜGT
$error-color-sass: #dc3545;
$background-color-light-sass: #f8f9fa; // Für Hover-Effekte

// CSS Custom Properties (mit Fallback auf Sass-Variablen)
$primary-color: var(--primary-color, $primary-color-sass);
$primary-color-dark: var(--primary-color-dark, #798C67); // Beispiel-Fallback
$text-color: var(--text-color, #333333);
$text-color-light: var(--text-color-light, #6c757d);
$border-color: var(--border-color, #dee2e6);
$border-color-light: var(--border-color-light, #eeeeee);
$background-color-light: var(--background-color-light, $background-color-light-sass);
$error-color: var(--error-color, $error-color-sass);
$error-color-dark: var(--error-color-dark, #a71d2a);
$disabled-color: var(--disabled-color, #bdbdbd);
$wishlist-icon-color: var(--wishlist-icon-color, #d9534f);
$border-radius: var(--border-radius, 6px);
$border-radius-small: var(--border-radius-small, 4px);


// --- Basis-Layout ---
:host {
  display: block;
  padding: $spacing-large;
  max-width: $page-max-width;
  margin: 1rem auto;
}

h1, h2 {
  color: $primary-color-dark;
  margin-bottom: $spacing-medium;
}

h1 {
  text-align: center;
  margin-bottom: $spacing-large;
  font-size: 2em;
}

h2 {
  font-size: 1.4em;
  border-bottom: 1px solid $border-color-light;
  padding-bottom: $spacing-small;
  margin-top: 0;
}

a {
  color: $primary-color;
  text-decoration: none;
  &:hover {
    color: $primary-color-dark;
    text-decoration: underline;
  }
}

// --- Lade- & Fehler-Styles ---
.loading-indicator.wishlist-loading {
  padding: $spacing-xl * 2;
  text-align: center;
  color: $text-color-light;
  font-size: 1.1em;
}

.error-message {
  padding: $spacing-small $spacing-medium;
  border-radius: $border-radius;
  margin-bottom: $spacing-medium;
  border: 1px solid transparent;
  font-size: 0.95em;
  text-align: center;

  &.global-wishlist-error, &.product-load-error {
    background-color: color.adjust($error-color-sass, $alpha: -0.85);
    border-color: color.adjust($error-color-sass, $alpha: -0.7);
    color: $error-color-dark;
  }
}

// --- Hauptinhalt Grid ---
.wishlist-content {
  display: grid;
  grid-template-columns: minmax(0, 2.5fr) minmax(0, 1fr);
  gap: $spacing-xl;

  @media (max-width: $breakpoint-large) {
    grid-template-columns: 1fr;
  }
}

// --- Produktliste (Links) ---
.wishlist-items {
  .items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: $spacing-large;

    @media (max-width: $breakpoint-small) {
        grid-template-columns: 1fr;
        gap: $spacing-medium;
    }
  }
}

// --- Einzelne Produktkarte auf Wunschliste ---
.wishlist-item-card {
  display: flex;
  flex-direction: column;
  border: 1px solid $border-color-light;
  border-radius: $border-radius;
  background-color: #fff;
  overflow: hidden;
  transition: box-shadow 0.2s ease-in-out;
  position: relative;

  &:hover {
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
  }

  .item-link {
    text-decoration: none;
    color: inherit;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  .item-image {
    width: 100%;
    aspect-ratio: 1 / 1;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: $background-color-light;

    img { display: block; width: 100%; height: 100%; object-fit: contain; }
    .placeholder-image.small {
        width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;
        .material-symbols-outlined { font-size: 3rem; color: $border-color; }
    }
  }

  .item-info {
    padding: $spacing-medium;
    flex-grow: 1;
    display: flex;
    flex-direction: column;

    .item-title {
      font-size: 0.95rem; font-weight: 600; margin: 0 0 $spacing-small 0; line-height: 1.3;
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
      overflow: hidden; text-overflow: ellipsis; min-height: 2.6em;
    }
    .item-price {
      font-size: 1rem; font-weight: bold; color: var(--price-color, #2e6b2e); margin-top: auto;
    }
  }

  .item-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: $spacing-small $spacing-medium;
    border-top: 1px solid $border-color-light;
    background-color: $background-color-light;

    .action-button {
      background: none; border: none; padding: $spacing-small; margin: 0; cursor: pointer;
      display: inline-flex; align-items: center; justify-content: center; line-height: 1;
      border-radius: 50%; transition: background-color 0.2s ease, color 0.2s ease;

      .material-symbols-outlined { font-size: 22px; display: block; }

      &:disabled {
        opacity: 0.5; cursor: not-allowed; background-color: transparent !important; color: $disabled-color !important;
      }

      &.remove-button {
        color: $text-color-light;
        &:hover:not(:disabled) {
          color: $error-color;
          background-color: color.adjust($error-color-sass, $alpha: -0.85); // Korrigiert
        }
      }
      &.add-to-cart-button {
        color: $text-color-light;
         &:hover:not(:disabled) {
          color: $primary-color;
          background-color: color.adjust($primary-color-sass, $alpha: -0.85); // Korrigiert
        }
      }
    }
  }
}

// --- Zusammenfassung (Rechts) ---
.wishlist-summary {
  background-color: $background-color-light;
  padding: $spacing-large;
  border-radius: $border-radius;
  border: 1px solid $border-color-light;
  height: fit-content;
  position: sticky;
  top: $spacing-large;

  .summary-row {
    display: flex; justify-content: space-between; margin-bottom: $spacing-medium; font-size: 1em;
    span:first-child { color: $text-color-light; }
    span:last-child { font-weight: 500; }
    &.total-price { font-weight: 600; font-size: 1.1em; margin-top: $spacing-large; padding-top: $spacing-large; border-top: 1px solid $border-color; }
  }

  .vat-info { font-size: 0.9em; color: $text-color-light; text-align: center; margin-top: $spacing-small; margin-bottom: $spacing-large; }

  .add-all-to-cart-button {
    display: block; width: 100%; font-weight: 600; line-height: 1.5; color: #fff; text-align: center; text-decoration: none;
    vertical-align: middle; cursor: pointer; user-select: none; background-color: $primary-color; border: 1px solid $primary-color;
    padding: $spacing-medium * 0.8 $spacing-medium; font-size: 1.1em; border-radius: $border-radius;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    &:hover:not(:disabled) { color: #fff; background-color: $primary-color-dark; border-color: $primary-color-dark; }
    &:disabled { color: #fff; background-color: $primary-color; border-color: $primary-color; opacity: 0.65; cursor: not-allowed; }
  }
}

// --- Meldung für leere Wunschliste ---
.empty-wishlist-message {
  text-align: center; padding: $spacing-xl * 2 $spacing-xl; border: 1px dashed $border-color-light;
  border-radius: $border-radius; background-color: $background-color-light; display: flex; flex-direction: column;
  align-items: center; justify-content: center; min-height: 300px;
  h2 { margin-bottom: $spacing-medium; color: $text-color; }
  p { margin-bottom: $spacing-large; color: $text-color-light; max-width: 400px; }
  .primary-button {
     display: inline-block; font-weight: 400; line-height: 1.5; color: #fff; text-align: center; text-decoration: none;
     vertical-align: middle; cursor: pointer; user-select: none; background-color: $primary-color; border: 1px solid $primary-color;
     padding: $spacing-small $spacing-large; font-size: 1rem; border-radius: $border-radius;
     transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
     &:hover { color: #fff; background-color: $primary-color-dark; border-color: $primary-color-dark; }
  }
}

// --- Responsive Anpassungen ---
@media (max-width: $breakpoint-large) {
  .wishlist-content { grid-template-columns: 1fr; }
  .wishlist-summary { position: static; top: auto; margin-top: $spacing-xl; }
}
@media (max-width: $breakpoint-medium) {
  .wishlist-items .items-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
  h1 { font-size: 1.8em; }
  :host { padding: $spacing-medium; margin: 0.5rem auto; }
  .wishlist-page-content { padding: $spacing-large; }
}
@media (max-width: $breakpoint-small) {
    .wishlist-items .items-grid { grid-template-columns: 1fr; }
    h1 { font-size: 1.6em; }
    .wishlist-page-content { padding: $spacing-medium; }
    .wishlist-summary { padding: $spacing-medium; }
}