<section class="hero-section">
  <video class="hero-video" autoplay loop muted playsinline>
    <source src="assets/videos/SchleifenVideo.mp4" type="video/mp4">
    Dein Browser unterstützt leider keine HTML5 Videos.
  </video>
</section>

<section class="weather-section content-container">
  @if (isLoadingWeather()) {
    <div class="loading-indicator small"><p>Lade Wetter...</p></div>
  } @else if (errorWeather()) {
    <div class="error-message small"><p>{{ errorWeather() }}</p></div>
  } @else {
    @if (weatherData(); as data) {
      <div class="weather-display">
        <img [src]="data.iconUrl" [alt]="data.description" class="weather-icon" width="50" height="50">
        <div class="weather-info">
          <span class="weather-temp">{{ data.tempCelsius | number:'1.0-0' }}°C</span>
          <span class="weather-desc">{{ data.description }}</span>
          <span class="weather-location">in {{ data.locationName }}</span>
        </div>
      </div>
    } @else {
       <p class="info-message small">Wetterdaten nicht verfügbar.</p>
    }
  }
</section>

<section class="bestseller-section content-container">
  <h2>Unsere Bestseller</h2>
  @if (isLoadingBestsellers()) {
    <div class="loading-indicator"><p>Lade Bestseller...</p></div>
  } @else if (errorBestsellers()) {
    <div class="error-message"><p>{{ errorBestsellers() }}</p></div>
  } @else {
    @if (bestsellerProducts().length > 0) {
      <div class="product-grid">
        @for (product of bestsellerProducts(); track product.id) {
          <app-product-card [product]="product"></app-product-card>
        }
      </div>
    } @else {
      <p class="info-message">Momentan sind keine Bestseller verfügbar.</p>
    }
  }
</section>

<section class="news-section content-container">
  <h2>Aktuelles aus dem Garten</h2>
  @if (isLoadingNews()) {
    <div class="loading-indicator"><p>Lade Nachrichten...</p></div>
  } @else if (errorNews()) {
    <div class="error-message"><p>{{ errorNews() }}</p></div>
  } @else {
    @if (newsArticles().length > 0) {
      <div class="news-list">
        @for (article of newsArticles(); track article.url) {
          <article class="news-article-card">
            @if (article.urlToImage) {
              <a [href]="article.url" target="_blank" rel="noopener noreferrer" class="news-image-link" aria-label="Artikelbild">
                <img [src]="article.urlToImage" [alt]="article.title || 'Nachrichtenbild'" loading="lazy" class="news-image"
                     onerror="this.style.display='none'; this.parentElement.style.display='none'">
              </a>
            }
            <div class="news-content">
              <h3>
                <a [href]="article.url" target="_blank" rel="noopener noreferrer">{{ article.title }}</a>
              </h3>
              @if (article.description) {
                <p class="news-description">{{ article.description }}</p>
              }
              <div class="news-meta">
                 @if(article.source.name) {
                    <span class="news-source">Quelle: {{ article.source.name }}</span>
                 }
                 <span class="news-date">{{ article.publishedAt | date:'shortDate' }}</span>
              </div>
              <a [href]="article.url" target="_blank" rel="noopener noreferrer" class="read-more-link">Weiterlesen<span class="visually-hidden"> über {{article.title}}</span></a>
            </div>
          </article>
        }
      </div>
    } @else {
      <p class="info-message">Keine aktuellen Garten-Nachrichten gefunden.</p>
    }
  }
</section>