<!-- /src/app/shared/components/login-overlay/login-overlay.component.html -->
<div class="login-overlay" (click)="closeOverlay()">

  <div class="overlay-content" (click)="$event.stopPropagation()">

    <button class="close-button icon-button" (click)="closeOverlay()" [attr.aria-label]="'general.close' | transloco"> <!-- NEU: 'general.close' Key -->
      <span class="material-symbols-outlined">close</span>
    </button>

    <div class="overlay-header">
      <h1>{{ 'loginOverlay.title' | transloco }}</h1>
      <p>{{ 'loginOverlay.subtitle' | transloco }}</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate class="auth-form overlay-form">

      <div class="form-field">
        <label for="overlayLoginEmail">{{ 'loginOverlay.emailLabel' | transloco }}</label>
        <input type="email" id="overlayLoginEmail" formControlName="email" [placeholder]="'loginOverlay.emailPlaceholder' | transloco" required
               [attr.aria-invalid]="email?.invalid && (email?.touched || formSubmitted())"
               aria-describedby="overlayLoginEmailError">
        <div id="overlayLoginEmailError" class="error-container"
             *ngIf="email?.invalid && (email?.touched || formSubmitted())">
          <small *ngIf="email?.errors?.['required']">{{ 'loginOverlay.emailRequiredError' | transloco }}</small>
          <small *ngIf="email?.errors?.['email']">{{ 'loginOverlay.emailInvalidError' | transloco }}</small>
        </div>
      </div>

      <div class="form-field">
        <label for="overlayLoginPassword">{{ 'loginOverlay.passwordLabel' | transloco }}</label>
        <input type="password" id="overlayLoginPassword" formControlName="password" required
               [attr.aria-invalid]="password?.invalid && (password?.touched || formSubmitted())"
               aria-describedby="overlayLoginPasswordError">
         <div id="overlayLoginPasswordError" class="error-container"
             *ngIf="password?.invalid && (password?.touched || formSubmitted())">
          <small *ngIf="password?.errors?.['required']">{{ 'loginOverlay.passwordRequiredError' | transloco }}</small>
        </div>
         <div class="forgot-password-link">
            <button type="button" class="link-button" (click)="navigateToForgotPassword()">{{ 'loginOverlay.forgotPasswordLink' | transloco }}</button>
         </div>
      </div>

      <div *ngIf="errorMessage()" class="error-message general-error">
        {{ errorMessage() }} <!-- Dynamische Fehlermeldungen werden schon im TS Ã¼bersetzt -->
      </div>

      <button type="submit" class="submit-button" [disabled]="loginForm.invalid || isLoading()">
        <span *ngIf="!isLoading()">{{ 'loginOverlay.loginButton' | transloco }}</span>
        <span *ngIf="isLoading()" class="button-loading-spinner"></span>
        <span *ngIf="isLoading()">{{ 'loginOverlay.loggingInButton' | transloco }}</span>
      </button>

    </form>

    <div class="social-login-divider"><span>{{ 'loginOverlay.orDivider' | transloco }}</span></div>
    <div class="social-login-buttons">
       <div #googleBtnContainerOverlay class="google-button-container-overlay">
           <!-- Google Button wird hier gerendert, Text kommt von Google -->
       </div>
    </div>

    <div class="auth-switch-link overlay-switch-link">
      <p>{{ 'loginOverlay.noAccountPrompt' | transloco }} <button type="button" class="link-button" (click)="navigateToRegister()">{{ 'loginOverlay.registerNowLink' | transloco }}</button></p>
    </div>

  </div>
</div>